(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(1632)}])},1632:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return l}});var a=t(5893),s=t(7294),n=t(1163),o=t(1664),d=t.n(o);function l(){let[e,r]=(0,s.useState)({username:"",password:""}),[t,o]=(0,s.useState)(""),[l,i]=(0,s.useState)(!1),c=(0,n.useRouter)(),u=async r=>{r.preventDefault(),o(""),i(!0);try{let r=new URLSearchParams;r.append("username",e.username),r.append("password",e.password);let t=await fetch("https://fightmatch-backend.onrender.com/token",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r}),a=await t.json();if(t.ok){localStorage.setItem("access_token",a.access_token);try{let e=await fetch("https://fightmatch-backend.onrender.com/users/me",{headers:{Authorization:"Bearer ".concat(a.access_token)}});if(e.ok){let r=await e.json();localStorage.setItem("user_id",r.id),localStorage.setItem("username",r.username),console.log("User data stored:",r.id,r.username)}}catch(e){console.error("Error fetching user data:",e)}await c.replace("/discover")}else o(a.detail||"Login failed")}catch(e){o("Connection error. Make sure the backend is running."),console.error("Login error:",e)}finally{i(!1)}},m=t=>{r({...e,[t.target.name]:t.target.value})};return(0,a.jsx)("div",{className:"min-h-screen bg-gray-900 flex items-center justify-center px-4",children:(0,a.jsxs)("div",{className:"max-w-md w-full bg-gray-800 rounded-2xl shadow-2xl p-8 border border-red-500/20",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"text-6xl mb-4",children:"\uD83E\uDD4A"}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"FightMatch"}),(0,a.jsx)("p",{className:"text-gray-400",children:"Sign in to find your sparring partner"})]}),t&&(0,a.jsx)("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-lg text-red-500 text-sm",children:t}),(0,a.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-300 text-sm font-semibold mb-2",children:"Username"}),(0,a.jsx)("input",{type:"text",name:"username",value:e.username,onChange:m,className:"w-full px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition",placeholder:"Enter your username",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-gray-300 text-sm font-semibold mb-2",children:"Password"}),(0,a.jsx)("input",{type:"password",name:"password",value:e.password,onChange:m,className:"w-full px-4 py-3 bg-gray-900 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:border-red-500 transition",placeholder:"Enter your password",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:l,className:"w-full bg-red-600 hover:bg-red-700 disabled:bg-gray-700 text-white font-bold py-3 px-4 rounded-lg transition",children:l?"Signing in...":"Sign In"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-gray-400 text-sm",children:["Don't have an account?"," ",(0,a.jsx)(d(),{href:"/register",className:"text-red-500 hover:text-red-400 font-semibold",children:"Sign up"})]})})]})})}}},function(e){e.O(0,[664,888,774,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);